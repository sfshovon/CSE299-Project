{% extends "login_register/base.html" %}

{% block title %}User Profile{% endblock title %}

<script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-app.js"></script>
 
<script type="text/javascript">
    var firebaseConfig = {
        apiKey: 'AIzaSyCR1mvz5oDzyUfC6fk_Y56mgGXy7uVawCY',
        authDomain: 'pashe-achi-cse299.firebaseapp.com',
        databaseURL: 'https://pashe-achi-cse299-default-rtdb.firebaseio.com/',
        projectId: 'pashe-achi-cse299',
        storageBucket: 'pashe-achi-cse299.appspot.com',
        messagingSenderId: "798613820174",
        appId: '1:798613820174:web:8d03f5cf0fbae3e9dcbd5f',
        measurementId: 'G-TZN8WC3LJT'
    };
    firebase.initializeApp(firebaseConfig);
    function delprofile(){
        const user = firebase.auth().currentUser;

        user.delete().then(() => {
        // User deleted.
        }).catch((error) => {
        // An error ocurred
        // ...
        });
    }
</script>

{% block body %}
<div class="container emp-profile" style="line-height: 2.5;">
<div class="row">
<div class="col-md-4">
<div class="profile-img" style= "width: 100%; height: 250px; overflow: hidden;">
    {% if photolink == 0 %}
        <img src="https://firebasestorage.googleapis.com/v0/b/pashe-achi-cse299.appspot.com/o/Photo%20Not%20Available.png?alt=media&token=bf96af46-58df-4002-a78a-6e78aafdc058" class="rounded-circle z-depth-0" alt="No image found!" height="220">
    {% else %}
        <img src={{photolink}} class="rounded-circle z-depth-0; width: 100%; height: 220px border-radius:50%;" alt="avatar image" height="250">
    {% endif %}
</div>
</div>

    <div class="col-md-6">
    <div class="profile-head">
    <h5>
        {{fname}} {{lname}}
    </h5>                   
    </div>
    </div>

    <div class="col-md-2">
    <a href="{% url 'EP' %}" class="profile-edit-btn" style="font-size:20px; font-weight: 800;">
    <i class="fas fa-edit"></i> Edit Profile
    </a>
    </div>

</div>
               
    <div class="col-md-8">
    <div class="tab-content profile-tab" id="myTabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
    
    <br> 
    <div class="row">
        <div class="col-md-6">
        <label>First Name:</label>
        </div>

        <div class="col-md-6">
        <p>{{fname}}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
        <label>Last Name:</label>
        </div>

        <div class="col-md-6">
        <p>{{lname}}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
        <label>Age:</label>
        </div>
        
        <div class="col-md-6">
        <p>{{age}}</p>
        </div>
    </div>
              
    <div class="row">
        <div class="col-md-6">
        <label>Date of Birth:</label>
        </div>

        <div class="col-md-6">
        <p>{{dob}}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
        <label>Gender:</label>
        </div>

        <div class="col-md-6">
        <p>{{gender}}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
        <label>Occupation:</label>
        </div>
        
        <div class="col-md-6">
        <p>{{occupation}}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
        <label>Contact Number:</label>
        </div>
        
        <div class="col-md-6">
        <p>{{cnumber}}</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
        <label>Blood Group:</label>
        </div>
        
        <div class="col-md-6">
        <p>{{bgroup}}</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
        <label>Email:</label>
        </div>
        
        <div class="col-md-6">
        <p>{{email}}</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
        <label> Remove Your Profile Data </label>
        </div>
        
        <div class="col-md-6">
        <form action="{% url 'DP' %}" method="POST">
        {% csrf_token %}
            <input type="submit" class="btn btn-danger" value="Remove" onclick="return delprofile()">      
        </form>
        </div>
    </div>

    </div>                   
    </div>
    </div> 
             
</div>

<style>
    .emp-profile{
        padding: 3%;
        margin-top: %;
        margin-bottom: 3%;
        border-radius: 0.5rem;
        background-color: #5ca0f2;
        background-image: linear-gradient(315deg, #5ca0f2 0%, #f5f7f6 74%);
    }

    .profile-img{
        text-align: center;
    }

    .profile-img img{
        width: 70%;
        height: 100%;
    }

    .profile-img .file {
        position: relative;
        overflow: hidden;
        margin-top: -20%;
        width: 70%;
        border: none;
        border-radius: 0;
        font-size: 15px;
        background: #212529b8;
    }

    .profile-img .file input {
        position: absolute;
        opacity: 0;
        right: 0;
        top: 0;
    }

    .profile-head h5{
        color: #333;
        font-weight: 800;
    }
    
    .profile-edit-btn{
        border: none;
        border-radius: 1.5rem;
        width: 70%;
        padding: 2%;
        font-weight: 600;
        color: #6c757d;
        cursor: pointer;
    } 

    .profile-tab label{
        font-weight: 800;
    }
    
    .profile-tab p{
        font-weight: 800;
        color: #0062cc;
    }

</style>
{% endblock body %}


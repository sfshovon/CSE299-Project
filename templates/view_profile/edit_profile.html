{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Edit Profile</title>
    <!-- MDB icon -->
    <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <!-- Bootstrap core CSS -->
    
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->


    

  <style>
  
    body{ 
        background: -webkit-linear-gradient(#3931af, #00c6ff);
    }
    .body{
        margin-top:0px;
        margin-left:20px;
    }
    .padding{
      margin-top:10px;
      
    }
     .row.heading h2 {
            color: #fff;
            font-size: 52.52px;
            line-height: 95px;
            font-weight: 400;
            text-align: center;
            margin: 0 0 40px;
            padding-bottom: 20px;
            text-transform: uppercase;
        }
        
        ul {
            margin: 0;
            padding: 0;
            list-style: none;
        }
        
        .heading.heading-icon {
            display: block;
        }
        
        .padding-lg {
            display: block;
            padding-top: 60px;
            padding-bottom: 60px;
        }
        
        .practice-area.padding-lg {
            padding-bottom: 55px;
            padding-top: 55px;
        }
        
        .practice-area .inner {
            border: 1px solid #999999;
            text-align: center;
            margin-bottom: 28px;
            padding: 40px 25px;
        }
        
        .our-webcoderskull .cnt-block:hover {
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            border: 0;
        }
        
        .practice-area .inner h3 {
            color: #3c3c3c;
            font-size: 24px;
            font-weight: 500;
            font-family: 'Poppins', sans-serif;
            padding: 10px 0;
        }
        
        .practice-area .inner p {
            font-size: 14px;
            line-height: 22px;
            font-weight: 400;
        }
        
        .practice-area .inner img {
            display: inline-block;
        }
        
        .our-webcoderskull {
            background: #ffffff
        }
        
        .our-webcoderskull .cnt-block {
            float: left;
            width: 100%;
            background: #fff;
            padding: 30px 20px;
            text-align: center;
            border: 2px solid #d5d5d5;
            margin: 0 0 28px;
        }
        
        .our-webcoderskull .cnt-block figure {
            width: 148px;
            height: 148px;
            border-radius: 100%;
            display: inline-block;
            margin-bottom: 15px;
        }
        
        .our-webcoderskull .cnt-block img {
            width: 148px;
            height: 148px;
            border-radius: 100%;
        }
        
        .our-webcoderskull .cnt-block h3 {
            color: #2a2a2a;
            font-size: 20px;
            font-weight: 500;
            padding: 6px 0;
            text-transform: uppercase;
        }
        
        .our-webcoderskull .cnt-block h3 a {
            text-decoration: none;
            color: #2a2a2a;
        }
        
        .our-webcoderskull .cnt-block h3 a:hover {
            color: #337ab7;
        }
        
        .our-webcoderskull .cnt-block p {
            color: #2a2a2a;
            font-size: 13px;
            line-height: 20px;
            font-weight: 400;
        }
        
        .our-webcoderskull .cnt-block .follow-us {
            margin: 20px 0 0;
        }
        
        .our-webcoderskull .cnt-block .follow-us li {
            display: inline-block;
            width: auto;
            margin: 0 5px;
        }
        
        .our-webcoderskull .cnt-block .follow-us li .fa {
            font-size: 24px;
            color: #767676;
        }
        
        .our-webcoderskull .cnt-block .follow-us li .fa:hover {
            color: #025a8e;
        }
.navbar{
    background:rgb(66, 64, 60)!important;
}

.dropdown{
    border-radius:0;
    border:0;
}
.dropdown-menu{
    background: rgb(218, 117, 17);
    border:4;
    top:80%;
    border-radius:0px 0px 5px 5px;
	
}
.dropdown-item:hover{
    background:rgb(218, 117, 17);
    color:#fff;
}
.dropdown-menu a{
    color:#fff;
} 
.navbar .nav-item .nav-link{
    color:#eee !important; 
    

    
}
  </style>
</head>
<body>
	<!------navbar PART ---------->

		<nav class="navbar navbar-expand-sm navbar-light bg-light">
    </ul>
     <ul class="navbar-nav ml-auto nav-flex-icons">
      <li class="nav-item avatar">
        <a class="nav-link p-0" href="{% url 'VP' %}">
          <strong>  {{fname}} {{lname}}  </strong>
         
          {% if photolink is None %}
            <img src="https://firebasestorage.googleapis.com/v0/b/pashe-achi-cse299.appspot.com/o/Photo%20Not%20Available.png?alt=media&token=bf96af46-58df-4002-a78a-6e78aafdc058" class="rounded-circle z-depth-0" alt="avatar image" height="35">
          {% else %}
            <img src={{photolink}} class="rounded-circle z-depth-0" alt="avatar image" height="35">
          {% endif %}
      
        </a>
      </li>
    </ul>
   
  </div>
</nav>
    
    
     <div class="container-fluid">
    
        <!-- Section: Edit Account -->
        <section class="section padding">
          <!-- First row -->
          <div class="row">
            <!-- First column -->
            <div class="col-lg-4 mb-4">
    
              <!-- Card -->
              <div class="card card-cascade narrower">
    
                <!-- Card image -->
                <div class="view view-cascade gradient-card-header mdb-color btn-orange">
                  <h5 class="mb-0 font-weight-bold">Profile</h5>
                </div>
                <!-- Card image -->
    
                <!-- Card content -->
                <div class="card-body card-body-cascade text-center">
                 
          {% if photolink is None %}
          <img src="https://firebasestorage.googleapis.com/v0/b/pashe-achi-cse299.appspot.com/o/Photo%20Not%20Available.png?alt=media&token=bf96af46-58df-4002-a78a-6e78aafdc058" class="width: 100%; height: 250px; border-radius: 50%;" alt="avatar image" height="250">
          {% else %}
          <img src={{photolink}} class="width: 100%; height: 250px;" alt="avatar image" height="250">
          {% endif %}

                  <br><br> <label class="col-sm-8 control-label">{{fname}}</label>
                  <div class="col-sm-13">
                  <form action= "{% url 'update_img_url' %}" id="profile_image" name= "profile_image" method="POST">
                  {% csrf_token %}
                    <input class="form-control" type="file" name="files[]" id="files" >
                    <input type="hidden" name="photolink" id="photolink">
                  </div><br>
                  
                  <p class="text-muted"><small>Profile photo will be changed automatically</small></p>
                  <div class="row flex-center">
                    <button type ="button" onclick ="upprofile()" class="btn btn-info btn-rounded btn-sm btn-orange waves-effect waves-light">Upload New Photo</button><br>
                  </div>
               </form>

                </div>
                <!-- Card content -->
    
              </div>
              <!-- Card -->
    
            </div>
            <!-- First column -->
    
            <!-- Second column -->
            <div class="col-lg-8 mb-4">
    
              <!-- Card -->
              <div class="card card-cascade narrower">
    
                <!-- Card image -->
                <div class="view view-cascade gradient-card-header btn-orange">
                  <h5 class="mb-0 font-weight-bold">Edit Account</h5>
                </div>
                <!-- Card image -->
    
                <!-- Card content -->
                <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <div class="container bootstrap snippets bootdeys">
  
        <div class="panel panel-default">
          <div class="panel-heading">
          <h4 class="panel-title"> <b></b></h4>
          </div>
          <form action="{% url 'update_profile' %}" method="POST">
          {%  csrf_token %}
          <div class="form-group">
            <label class="col-sm-2 control-label"> <strong> First Name </strong></label>
            <div class="col-sm-12">
              <input value="{{fname}}" name="fname" type="text" class="form-control" required>
            </div>
            <label class="col-sm-2 control-label"> <strong> Last Name </strong></label>
            <div class="col-sm-12">
              <input value="{{lname}}" name="lname" type="text" class="form-control" required>
            </div>
            <label class="col-sm-2 control-label"> <strong> Age </strong></label>
            <div class="col-sm-12">
              <input value="{{age}}" name="age" type="number" class="form-control">
            </div>
            <label class="col-sm-2 control-label"> <strong> Date of Birth </strong></label>
            <div class="col-sm-12">
              <input value="{{dob}}" name="dob" type="text" class="form-control" onfocus="(this.type='date')">
             <div class="panel-body">
              <div class="form-group">
                <label class="col-sm-2 control-label"><strong> Gender </strong></label>
                <div  class="col-sm-12">
                  <select name="gender" class="form-control">
                    <option value="{{gender}}" selected>{{gender}}</option>
                    <option value = "Female">Female</option>
                    <option value = "Male">Male</option>
                    <option value = "Others">Others</option>
                  </select>
                </div>
              </div>
          </div>
            <label class="col-sm-2 control-label"> <strong> Occupation </strong></label>
            <div class="col-sm-12">
              <input value="{{occupation}}" name="occupation" type="text" class="form-control">
            </div>
            <label class="col-sm-2 control-label"> <strong> Contact Number </strong></label>
            <div class="col-sm-12">
              <input value="{{cnumber}}" name="cnumber" type="number" class="form-control">
            </div>
            </div>
           
            
          <div class="panel-body">
              <div class="form-group">
                <label class="col-sm-2 control-label"><strong> Blood Group </strong></label>
                <div  class="col-sm-12">
                  <select name="bgroup" class="form-control">
                    <option value="{{bgroup}}" selected>{{bgroup}}</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                  </select>
                </div>
              </div>
          </div>
  
            <div class="form-group">
              <div class="col-sm-12 col-sm-offset-2">
                <button type="submit" class="btn btn-orange">Update</button>
                </form>
              </div>
            </div>
            
          </div>
        </div>
      
    </div>
  </div>
  </div>
   
   <!-- SCRIPTS -->
  <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script>
    var config = {
    apiKey: "AIzaSyCR1mvz5oDzyUfC6fk_Y56mgGXy7uVawCY",
    authDomain: "pashe-achi-cse299.firebaseapp.com",
    databaseURL: "https://pashe-achi-cse299-default-rtdb.firebaseio.com/",
    projectId: "pashe-achi-cse299",
    storageBucket: "pashe-achi-cse299.appspot.com",
    messagingSenderId: "798613820174",
    appId: "1:798613820174:web:8d03f5cf0fbae3e9dcbd5f",
    measurementId: "G-TZN8WC3LJT"
  };
  firebase.initializeApp(config);
  // Get a reference to the storage service, which is used to create references in your storage bucket
  function upprofile(){
  var storage = firebase.storage();
  var file = document.getElementById("files").files[0];
  var storageRef = storage.ref();
  var thisref = storageRef.child("Profile_Picture").child(file.name).put(file);
  thisref.on('state_changed',function(snapshot){
  console.log("file uplaoded succesfully");
  },
  function(error) {
  },
  function() {
  // Upload completed successfully, now we can get the download URL
  var downloadURL = thisref.snapshot.downloadURL;
  console.log("got url");
  document.getElementById("photolink").value = downloadURL;
  alert("file uploaded successfully");
  document.profile_image.submit();
});
    }
</script> 
    
  
  
  
  <!-- /Start your project here-->

  
  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
               
		
</body>

</html>

